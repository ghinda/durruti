!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.durruti=b()}(this,function(){"use strict";function a(){g===!0&&console.warn.apply(console,arguments)}function b(a){var b;b="function"==typeof a?new a:a;var c=b._durruti||{};return c.id=String(m++),"function"!=typeof b.mount&&(b.mount=function(){}),"function"!=typeof b.unmount&&(b.unmount=function(){}),b._durruti=c,l[c.id]=b,b}function c(a){return l[a]}function d(a){a||(m=0,l={}),l[a]=null}function e(a,b){if("undefined"!=typeof window){var c=document.createElement("div");if(c.innerHTML=a,1!==c.children.length)throw new Error("Component template must have a single parent node.",a)}var d=a.indexOf(">"),e=" "+j+'="'+b+'"';return a.substr(0,d)+e+a.substr(d)}function f(){a("state.js is not included. Store data will not be shared between client and server.")}var g=!0,h=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j="data-durruti-id",k="["+j+"]",l={},m=0,n=function(){function a(){h(this,a)}return i(a,[{key:"get",value:function(){f()}},{key:"set",value:function(){f()}}]),a}(),o=function(){function f(){h(this,f),this._state=new n}return i(f,[{key:"renderStatic",value:function(a){return d(),a}},{key:"render",value:function(f,g){var h=b(f);if("undefined"==typeof h.render)throw new Error("Components must have a render() method.");var i,l,m,n=h.render(),o=e(n,h._durruti.id);if("undefined"!=typeof window&&g){if(!document.body.contains(g))return void a("Node",g,"is no longer in the DOM. \nIt was probably removed by a parent component.");var p=g.innerHTML;if(g.getAttribute(j)){m=[].slice.call(g.querySelectorAll(k)),m.push(g),m.forEach(function(a){i=a.getAttribute(j),l=c(i),l.unmount(a),d(i)});var q=document.createElement("div");q.innerHTML=o,q=q.firstElementChild,g.parentNode.replaceChild(q,g),m=[].slice.call(q.querySelectorAll(k)),m.unshift(q)}else p.trim()!==o.trim()&&(g.innerHTML=o),m=[].slice.call(g.querySelectorAll(k));m.forEach(function(a){i=a.getAttribute(j),l=c(i),l.mount(a)})}return o}}]),f}(),p=new o;return p});