!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.durruti=b()}(this,function(){"use strict";function a(){s===!0&&console.warn.apply(console,arguments)}function b(a,b,c){for(var d=0;d<a.childNodes.length;d++)e(a.childNodes[d],b.childNodes[d],c)}function c(a,b){for(var c={},d=0;d<a.attributes.length;d++)c[a.attributes[d].name]=null;for(var e=0;e<b.attributes.length;e++)c[b.attributes[e].name]=b.attributes[e].value;return c}function d(a,b){var d=c(a,b);for(var e in d)d[e]?a.setAttribute(e,d[e]):a.removeAttribute(e);a._durruti=b._durruti}function e(a,c,d){if(!a.isEqualNode(c)){var e=!1;return 1!==a.nodeType||1!==c.nodeType||a.tagName!==c.tagName||a.childNodes.length!==c.childNodes.length?e=!0:b(a,c,d),d.push({node:a,newNode:c,replace:e}),d}}function f(a){a.replace?a.node.parentNode.replaceChild(a.newNode,a.node):d(a.node,a.newNode)}function g(a,b){e(a,b,[]).forEach(f)}function h(a){var b;return b="function"==typeof a?new a:Object.create(a),b._durrutiId=String(y++),x[b._durrutiId]=b,b}function i(a){return a._durruti||x[a.getAttribute(v)]}function j(a,b){var c=[].slice.call(a.querySelectorAll(w));return b&&c.unshift(a),c.forEach(function(a){a._durruti=i(a),a.removeAttribute(v)}),c}function k(a){var b=i(a);b.unmount&&b.unmount(a),m(b)}function l(a){var b=i(a);b.mount&&b.mount(a)}function m(a){a?x[a._durrutiId]=null:(y=0,x={})}function n(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];a=a.trim();var b,c="div";if(0===a.indexOf("<tr")?c="tbody":0===a.indexOf("<td")&&(c="tr"),b=document.createElement(c),b.innerHTML=a,1!==b.children.length)throw new Error("Component template must have a single parent node.",a);return b.firstElementChild}function o(a,b){var c=a.indexOf("/>");-1===c&&(c=a.indexOf(">"));var d=" "+v+'="'+b._durrutiId+'"';return a.substr(0,c)+d+a.substr(c)}function p(a,b){var c;for(c=0;c<a.children.length;c++)a.children[c].children.length&&p(a.children[c],b),a.children[c]._durruti&&b.push(a.children[c]);return b}function q(a){var b=p(a,[]);return b.push(a),b}function r(){a("state.js is not included. Store data will not be shared between client and server.")}var s=!0,t=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v="data-durruti-id",w="["+v+"]",x={},y=0,z=function(){function a(){t(this,a)}return u(a,[{key:"get",value:function(){r()}},{key:"set",value:function(){r()}}]),a}(),A=function(){function b(){t(this,b),this._state=new z}return u(b,[{key:"renderStatic",value:function(a){return m(),a}},{key:"render",value:function(b,c){var d=h(b);if("undefined"==typeof d.render)throw new Error("Components must have a render() method.");var e=d.render(),f=o(e,d);if("undefined"!=typeof window&&c){if(!document.body.contains(c))return void a("Node",c,"is no longer in the DOM. \nIt was probably removed by a parent component.");var m=[];if(i(c)){q(c).forEach(k);var p=n(f);m=j(p,!0),g(c,p)}else c.innerHTML.trim()!==f.trim()&&(c.innerHTML=f),m=j(c);m.forEach(l)}return f}}]),b}(),B=new A;return B});