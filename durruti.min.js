!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.durruti=b()}(this,function(){"use strict";function a(){h===!0&&console.warn.apply(console,arguments)}function b(a){var b;b="function"==typeof a?new a:a;var c=b._durruti||{};return c.id=String(n++),"function"!=typeof b.mount&&(b.mount=function(){}),"function"!=typeof b.unmount&&(b.unmount=function(){}),b._durruti=c,m[c.id]=b,b}function c(a){return m[a]}function d(a){a||(n=0,m={}),m[a]=null}function e(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];a=a.trim();var b,c="div";if(0===a.indexOf("<tr")?c="tbody":0===a.indexOf("<td")&&(c="tr"),b=document.createElement(c),b.innerHTML=a,1!==b.children.length)throw new Error("Component template must have a single parent node.",a);return b.firstElementChild}function f(a,b){var c=a.indexOf(">"),d=" "+k+'="'+b+'"';return a.substr(0,c)+d+a.substr(c)}function g(){a("state.js is not included. Store data will not be shared between client and server.")}var h=!0,i=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k="data-durruti-id",l="["+k+"]",m={},n=0,o=function(){function a(){i(this,a)}return j(a,[{key:"get",value:function(){g()}},{key:"set",value:function(){g()}}]),a}(),p=function(){function g(){i(this,g),this._state=new o}return j(g,[{key:"renderStatic",value:function(a){return d(),a}},{key:"render",value:function(g,h){var i=b(g);if("undefined"==typeof i.render)throw new Error("Components must have a render() method.");var j,m,n,o=i.render(),p=f(o,i._durruti.id);if("undefined"!=typeof window&&h){if(!document.body.contains(h))return void a("Node",h,"is no longer in the DOM. \nIt was probably removed by a parent component.");var q=h.innerHTML;if(h.getAttribute(k)){n=[].slice.call(h.querySelectorAll(l)),n.push(h),n.forEach(function(a){j=a.getAttribute(k),m=c(j),m.unmount(a),d(j)});var r=e(p);h.parentNode.replaceChild(r,h),n=[].slice.call(r.querySelectorAll(l)),n.unshift(r)}else q.trim()!==p.trim()&&(h.innerHTML=p),n=[].slice.call(h.querySelectorAll(l));n.forEach(function(a){j=a.getAttribute(k),m=c(j),m.mount(a)})}return p}}]),g}(),q=new p;return q});