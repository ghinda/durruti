!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.durruti=b()}(this,function(){"use strict";function a(){f===!0&&console.warn.apply(console,arguments)}function b(a){var b;b="function"==typeof a?new a:a;var c=b._durruti||{};return c.id=String(l++),"function"!=typeof b.mount&&(b.mount=function(){}),"function"!=typeof b.unmount&&(b.unmount=function(){}),b._durruti=c,k[c.id]=b,b}function c(a){return k[a]}function d(a){a||(l=0,k={}),k[a]=null}function e(a,b){if("undefined"!=typeof window){var c=document.createElement("div");if(c.innerHTML=a,1!==c.children.length)throw new Error("Component template must have a single parent node.",a)}var d=a.indexOf(">"),e=" "+i+'="'+b+'"';return a.substr(0,d)+e+a.substr(d)}var f=!0,g=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i="data-durruti-id",j="["+i+"]",k={},l=0,m=function(){function f(){g(this,f)}return h(f,[{key:"renderStatic",value:function(a){return d(),a}},{key:"render",value:function(f,g){var h=b(f);if("undefined"==typeof h.render)throw new Error("Components must have a render() method.");var k,l,m,n=h.render(),o=e(n,h._durruti.id);if("undefined"!=typeof window&&g){if(!document.body.contains(g))return void a("Node",g,"is no longer in the DOM. \nIt was probably removed by a parent component.");var p=g.innerHTML;if(g.getAttribute(i)){m=[].slice.call(g.querySelectorAll(j)),m.push(g),m.forEach(function(a){k=a.getAttribute(i),l=c(k),l.unmount(a),d(k)});var q=document.createElement("div");q.innerHTML=o,q=q.firstElementChild,g.parentNode.replaceChild(q,g),m=[].slice.call(q.querySelectorAll(j)),m.unshift(q)}else p.trim()!==o.trim()&&(g.innerHTML=o),m=[].slice.call(g.querySelectorAll(j));m.forEach(function(a){k=a.getAttribute(i),l=c(k),l.mount(a)})}return o}}]),f}(),n=new m;return n});